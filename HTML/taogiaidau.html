<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Táº¡o Giáº£i Äáº¥u</title>
    <link rel="stylesheet" href="/CSS/taogiaidau.css" />
</head>
<body>
    <div class="header">
        <div class="logo">ğŸ®</div>
        <div class="nav">
          <a href="index.html">Trang chá»§</a>
          <a href="giaidau.html">Giáº£i Ä‘áº¥u</a>
          <a href="team.html">Äá»™i thi Ä‘áº¥u</a>
          <a href="trandau.html">Tráº­n Äáº¥u</a>
          <a href="xephang.html">Báº£ng Xáº¿p Háº¡ng</a>
          <a href="admin.html">Quáº£n LÃ½</a>
        </div>
        <div class="auth-buttons" id="authButtons">
          <!-- Sáº½ Ä‘Æ°á»£c cáº­p nháº­t bá»Ÿi JavaScript -->
          <a href="login.html" class="login-btn" id="loginBtn">ÄÄƒng nháº­p</a>
          <a href="register.html" class="register-btn" id="registerBtn">ÄÄƒng kÃ½</a>
        </div>
    </div>

    <div class="main-content">
        <div class="container">
            <div class="form-header">
                <div class="form-icon">ğŸ†</div>
                <h2>Táº¡o Giáº£i Äáº¥u Má»›i</h2>
                <p class="form-subtitle">Khá»Ÿi táº¡o má»™t giáº£i Ä‘áº¥u esports chuyÃªn nghiá»‡p</p>
            </div>
            
            <form id="form-giaidau" autocomplete="off">
                <div class="form-row">
                    <div class="form-group">
                        <label for="TenGiaiDau">
                            <span class="label-icon">ğŸ“</span>
                            TÃªn Giáº£i Äáº¥u
                        </label>
                        <input type="text" id="TenGiaiDau" name="TenGiaiDau" 
                               placeholder="Nháº­p tÃªn giáº£i Ä‘áº¥u..." required />
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="NgayBatDau">
                            <span class="label-icon">ğŸ“…</span>
                            NgÃ y Báº¯t Äáº§u
                        </label>
                        <input type="date" id="NgayBatDau" name="NgayBatDau" required />
                    </div>
                    
                    <div class="form-group">
                        <label for="NgayKetThuc">
                            <span class="label-icon">ğŸ</span>
                            NgÃ y Káº¿t ThÃºc
                        </label>
                        <input type="date" id="NgayKetThuc" name="NgayKetThuc" required />
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="MoTa">
                            <span class="label-icon">ğŸ“„</span>
                            MÃ´ Táº£ Giáº£i Äáº¥u
                        </label>
                        <textarea id="MoTa" name="MoTa" rows="5" 
                                  placeholder="MÃ´ táº£ chi tiáº¿t vá» giáº£i Ä‘áº¥u, quy Ä‘á»‹nh, giáº£i thÆ°á»Ÿng..." required></textarea>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-cancel">Há»§y</button>
                    <button type="submit" class="btn-submit">
                        <span class="btn-icon">âœ¨</span>
                        Táº¡o Giáº£i Äáº¥u
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        document.getElementById('form-giaidau').addEventListener('submit', function(e) {
            e.preventDefault();

            const data = {
                TenGiai: document.getElementById('TenGiaiDau').value.trim(),
                NgayBatDau: document.getElementById('NgayBatDau').value,
                NgayKetThuc: document.getElementById('NgayKetThuc').value,
                MoTa: document.getElementById('MoTa').value.trim()
            };

            // Validation
            if (new Date(data.NgayBatDau) >= new Date(data.NgayKetThuc)) {
                alert('NgÃ y káº¿t thÃºc pháº£i sau ngÃ y báº¯t Ä‘áº§u!');
                return;
            }

            const submitBtn = document.querySelector('.btn-submit');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<span class="btn-icon">â³</span>Äang táº¡o...';
            submitBtn.disabled = true;

            fetch('http://127.0.0.1:5000/GiaiDau/Add', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(res => res.json())
            .then(response => {
                if (response.message) {
                    alert('Táº¡o giáº£i Ä‘áº¥u thÃ nh cÃ´ng!');
                    this.reset();
                } else if (response.error) {
                    alert('Lá»—i: ' + response.error);
                }
            })
            .catch(error => {
                alert('Lá»—i khi gá»­i dá»¯ liá»‡u: ' + error.message);
            })
            .finally(() => {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            });
        });

        document.querySelector('.btn-cancel').addEventListener('click', function() {
            if (confirm('Báº¡n cÃ³ cháº¯c muá»‘n há»§y? Dá»¯ liá»‡u sáº½ bá»‹ máº¥t.')) {
                document.getElementById('form-giaidau').reset();
            }
        });
    </script>
</body>
</html>