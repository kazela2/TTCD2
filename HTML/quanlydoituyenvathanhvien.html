<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quáº£n lÃ½ Ä‘á»™i vÃ  thÃ nh viÃªn</title>
  <link rel="stylesheet" href="/CSS/quanlydoituyenvathanhvien.css" />
</head>
<body>
  <div class="sidebar">
    <h2>Quáº£n Trá»‹</h2>
    <a href="quanlygiaidau.html">ğŸ“¦ Quáº£n lÃ½ Giáº£i Äáº¥u</a>
    <a href="quanlydoituyenvathanhvien.html">ğŸ§¾ Quáº£n lÃ½ Äá»™i Tuyá»ƒn vÃ  ThÃ nh ViÃªn</a>
    <a href="quanli_trandau.html">ğŸ‘¥ Quáº£n lÃ½ Tráº­n Äáº¥u</a>
    <a href="quanli_xephang.html">ğŸ“Š Quáº£n LÃ½ Báº£ng Xáº¿p Háº¡ng</a>
    <a href="quanli_lichsu.html">ğŸ“Š Lá»‹ch Sá»­ Giáº£i Äáº¥u</a>
    <a href="index.html">Quay Láº¡i</a>
  </div>

  <div class="content">
    <h2>Danh sÃ¡ch Äá»™i Tuyá»ƒn</h2>
    <table id="doi-table">
      <thead>
        <tr>
          <th>TÃªn Äá»™i</th>
          <th>Huáº¥n Luyá»‡n ViÃªn</th>
          <th>TÃªn Giáº£i Äáº¥u</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <h2 style="margin-top: 40px;">ThÃ nh viÃªn Äá»™i</h2>
    <table id="thanhvien-table">
      <thead>
        <tr>
          <th>Há» TÃªn</th>
          <th>Vá»‹ TrÃ­</th>
          <th>Sá»‘ Ão</th>
          <th>Id Äá»™i</th> 
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    // Load danh sÃ¡ch Ä‘á»™i thi Ä‘áº¥u
    fetch('http://localhost:5000/DoiThiDau/GetAll')
      .then(response => response.json())
      .then(data => {
        const doiTable = document.querySelector('#doi-table tbody');
        data.forEach(doi => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${doi.TenDoi}</td>
            <td>${doi.TenHuanLuyenVien}</td>
            <td>${doi.TenGiai}</td>
          `;
          row.style.cursor = 'pointer';
          row.addEventListener('click', () => loadThanhVien(doi.IdDoi));
          doiTable.appendChild(row);
        });
      });

    // Khi click Ä‘á»™i thÃ¬ láº¥y danh sÃ¡ch thÃ nh viÃªn
    function loadThanhVien(idDoi) {
      fetch(`http://localhost:5000/ThanhVienDoi/GetByDoi/${idDoi}`)
        .then(response => response.json())
        .then(data => {
          const tvTable = document.querySelector('#thanhvien-table tbody');
          tvTable.innerHTML = '';
          data.forEach(tv => {
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${tv.HoTen}</td>
              <td>${tv.ViTri}</td>
              <td>${tv.SoAo}</td>
              <td>${tv.IdDoi}</td> <!-- Hiá»ƒn thá»‹ Id Ä‘á»™i á»Ÿ Ä‘Ã¢y -->
            `;
            tvTable.appendChild(row);
          });
        });
    }
  </script>
</body>
</html>
